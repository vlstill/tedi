\documentclass[11pt,twoside,a4paper]{book}
\usepackage[shorthands=off,english]{babel} % package for multilingual support

\RequirePackage{iftex}
\ifPDFTeX
    \usepackage[utf8]{inputenc} 
    \usepackage[T1]{fontenc}
    % \usepackage{lmodern}
\else
    \RequirePackage{fontspec} % UFT8 fonts for LuaLaTeX
    % \setmainfont{Latin Modern Roman}
\fi
\usepackage{csquotes}

\usepackage[ backend=biber
           , style=numeric
           , sortlocale=en_US
           , bibencoding=UTF8
           , maxcitenames=3
           , maxbibnames=100
           ]{biblatex}

\usepackage{xcolor}
\definecolor{dark-red}{rgb}{0.6,0.15,0.15}
\definecolor{dark-green}{rgb}{0.15,0.4,0.15}
\definecolor{medium-blue}{rgb}{0,0,0.5}
\usepackage[ pdfauthor={Vladimir Still}
           , pdftitle={TBD},
           , pdfsubject={XXX},
           , plainpages=false
           , pdfpagelabels
           , unicode
           , draft=false
           , colorlinks=true
           , linkcolor={dark-red}
           , citecolor={dark-green}
           , urlcolor={medium-blue}
           , unicode=true
           ]{hyperref}

\usepackage{amssymb,amsmath}
\usepackage{verbatim}
\usepackage[final]{listings}
\lstset{ language=C++ }
\usepackage{paralist}
% use upquote for straight quotes in verbatim environments
\usepackage{upquote}
\usepackage{markdownsyntax}

\usepackage{xspace}
\usepackage{pgf}
\usepackage{tikz}
\usetikzlibrary{arrows,positioning}
\usepackage{pdfpages}

\usepackage{float}
\makeatletter
% custom float style, derived from ruled
% - caption is at the bottom
% - spaces before and after figure are larger
% - rules are thinner
% - bottom rule is missing
\newcommand\floatc@botruled[2]{{\@fs@cfont #1} #2\par}
\newcommand\fs@botruled{\def\@fs@cfont{\bfseries}\let\@fs@capt\floatc@botruled
    \def\@fs@pre{\hrule\kern0.5\abovecaptionskip}%
    \def\@fs@post{}%
    \def\@fs@mid{\kern0.5\abovecaptionskip\hrule\kern0.5\abovecaptionskip}%
\let\@fs@iftopcapt\iffalse}
\makeatother
\floatstyle{botruled}
\restylefloat{figure}
% \restylefloat{table}
\usepackage[labelfont=bf]{caption}

\usepackage{multirow}
\usepackage{microtype}

\usepackage{tabularx}
\newcolumntype{C}{>{\centering\arraybackslash}X}
\usepackage{arydshln}
\newcommand{\dg}{\textsuperscript{\dag}}

\newcommand{\divine}{\mbox{\textsf{DIVINE}}\xspace}
\newcommand{\lart}{\mbox{\textsf{LART}}\xspace}

\newcommand{\paradise}{ParaDiSe\xspace}
\newcommand{\buchi}{Büchi\xspace}

\newcommand{\spin}{\mbox{\textsc{Spin}}\xspace} 
\newcommand{\ltsmin}{\mbox{LTSmin}\xspace}

\newcommand{\llvm}{\textsf{LLVM}\xspace}
\newcommand{\ltl}{LTL\xspace}

\newcommand{\darcs}{Darcs\xspace}

\newcommand{\tso}{TSO\xspace}
\newcommand{\pso}{PSO\xspace}
\newcommand{\xtso}{x86-TSO}

\newcommand{\dorel}[1]{\ifmmode\mathbin{#1}\else${#1}$\fi}
\newcommand{\rel}[1]{\dorel{\xrightarrow{\mathrm{#1}}}}
\newcommand{\loc}[1]{\ensuremath{\mathrm{loc}\left(#1\right)}}

\newcommand{\FI}{Faculty of Informatics}
\newcommand{\MU}{Masaryk University}

\newcommand{\Jirik}{prof. RNDr. Jiří Barnat, Ph.D.}
\newcommand{\Mornfall}{RNDr. Petr Ročkai, Ph.D.}

\newcommand{\thesistitle}{Memory-Model-Aware Analysis} % enter thesis title
\newcommand{\thesissubtitle}{PHD Thesis Proposal}
\newcommand{\thesisauthor}{Vladimír Štill}
\newcommand{\thesisYearCity}{Brno, 2017}
\newcommand{\thesisadvisor}{\Jirik}

\newcommand{\note}{\textit{Note:}\xspace}

\addbibresource{thesis.bib}

\usepackage{setspace}
\addtolength\textwidth{5pt} % about 129mm
\addtolength\oddsidemargin{1cm}
\addtolength\evensidemargin{-1cm}

\usepackage{enumitem}
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}%
  \setlength{\parskip}{0pt}%
  \setlength{\topsep}{0pt}%
  \setlength{\partopsep}{0pt}}

\newcommand{\TODO}[1]{\textbf{\color{red}#1}}

% autoref names
\addto\extrasenglish{
    \renewcommand{\chapterautorefname}{Chapter}
    \renewcommand{\sectionautorefname}{Section}
    \renewcommand{\subsectionautorefname}{Section}
}

\newcommand{\rot}[1]{\rotatebox{90}{#1\hspace*{0.5em}}}

% LUA magic

\directlua{dofile("thesis.lua")}

\newcommand{\mem}[1]{\directlua{tex.sprint(mem(#1))}}
\newcommand{\dmem}[1]{\mem{#1 * 1024}}
\newcommand{\si}[1]{\directlua{tex.sprint(si(#1))}}
\newcommand{\speedup}[2]{\directlua{tex.sprint(speedup(#1, #2))}}

\newcommand{\antispaceatend}{\vspace*{-\topsep}}

\setlength{\overfullrule}{5pt} % TODO: remove

\begin{document}

% initial pages from Mornfall + modifications

\frontmatter
\pagestyle{empty}
 
\begin{center}
    {\Large \sc \FI, \MU}
    \vskip4em
    \includegraphics[width = 4cm, height = 4cm] {logo_fi.pdf}
    \vskip4em
    {\begin{spacing}{1}
        \Huge \bf \thesistitle
    \end{spacing}}
    \vskip2em
    {\Large \sc \thesissubtitle}
    \vskip4em
    {\LARGE \bf \thesisauthor}
    \vfill
\end{center}
\textbf{Supervisor:}\\
\thesisadvisor \hfill \large \thesisYearCity
 
\cleardoublepage

\section*{Abstract}
\input{abstract}

\section*{Keywords}

\cleardoublepage

\section*{Acknowledgements}

\cleardoublepage
% \clearpage
\thispagestyle{empty}

\pagestyle{headings}
\tableofcontents % prints table of contents
\mainmatter

\chapter{Introduction}\label{chap:introduction}
\input{intro}

\chapter{Relaxed Memory Models}\label{chap:rmos}
\input{memory-models}

\chapter{Analysis Techniques for Memory Models}\label{chap:verification}
\input{verification}

\chapter{Achieved Results}\label{chap:results}
\input{results}

\chapter{Aim of the Work}\label{chap:aim}
\input{aim}

\chapter{Conclusion} \label{chap:conclusion}
\input{conclusion}

\appendix

\chapter*{Bibliography}
\addcontentsline{toc}{chapter}{Bibliography}
\markboth{}{} % avoid headers from last chapter in bibliography
\printbibliography[heading=none]

\end{document}
